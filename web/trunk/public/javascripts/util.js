function getUrlParam(D,G,C){D=D.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var B="[\\?&]"+D+"=([^&#]*)";var F=new RegExp(B);var E=F.exec(window.location.href);if(E==null){return""}else{var A=E[1];if(G){A=cleanEscapes(A)}if(C){A=cleanAddress(A)}return A}}function cleanEscapes(A){A=unescape(A);A=replaceAll(A,"+"," ");return A}function cleanAddress(A){A=replaceAll(A,"&"," and ");return A}function replaceAll(A,C,D){var B=A.indexOf(C);while(B!=-1){A=A.replace(C,D);B=A.indexOf(C)}return A}function forEach(F,C,B){B=B||this;var A=F.length;for(var E=0;E<A;E++){var D=C.call(B,F[E],E);if(D!==undefined){return D}}}function paramIsSet(A){return(typeof A!="undefined")}function defaultIfNotSet(A,B){return(typeof A!="undefined")?A:B}function trackEvent(D,C,A,B){if(pageTracker){pageTracker._trackEvent(D,C,A,B)}}function suppressErrors(){window.onerror=function(){return true}}function restoreErrors(){window.onerror=function(){return false}}GMap2.prototype.goTo=function(A,C){var B=this.isLoaded();this.setCenter(A,C);if(!B){createMapControls(this)}};GMap2.prototype.plotMarkers=function(B,D,C){D=(D>0)?D:0;C=(C>0&&C>D)?C:B.length;for(var A=D;A<C;A++){this.addOverlay(B[A].marker())}};function clearResults(C,D){for(var B=0;B<C.length;B++){for(var A=0;A<C[B].length;A++){if(C&&C[B]&&C[B][A]&&C[B][A].marker()){D.removeOverlay(C[B][A].marker())}}}}GMap2.prototype.setToBounds=function(D){var B=(D.getNorthEast().lat()+D.getSouthWest().lat())/2;var E=(D.getNorthEast().lng()+D.getSouthWest().lng())/2;var A=new GLatLng(B,E);var C=this.getBoundsZoomLevel(D,this.getSize())+1;map1.setCenter(A,Math.min(C,14))};var YWSID="OE1ypX2pMWu3RZPd3ZPs2g";var yelpCallback;var yelpParams;function queryYelp(E,D,F,B){yelpCallback=F;yelpParams=B;var A=document.createElement("script");A.src=makeYelpURL(E,replaceAll(D,"#"," "));A.type="text/javascript";var C=document.getElementsByTagName("head").item(0);C.appendChild(A);return false}function makeYelpURL(D,C){var B=D.getBounds();var A="http://api.yelp.com/business_review_search?callback=yelpResultsReturned&term="+C+"&num_biz_requested=1&tl_lat="+B.getSouthWest().lat()+"&tl_long="+B.getSouthWest().lng()+"&br_lat="+B.getNorthEast().lat()+"&br_long="+B.getNorthEast().lng()+"&ywsid="+YWSID;return encodeURI(A)}function yelpResultsReturned(A){if(yelpCallback){yelpCallback(A,yelpParams)}}function sortAndTrim(D,A){if(D.length<=1){return D}D.sort(function(F,E){return F.dispDist()-E.dispDist()});var C=[];C.push(D[0]);for(var B=1;B<D.length;B++){if(D[B].result_.title!=D[B-1].result_.title&&D[B].result_.streetAddress!=D[B-1].result_.streetAddress){C.push(D[B])}}if(!A||A>=C.length){return C}return C.slice(0,A)}function sortBySnapDist(D,A){if(D.length<=1){return D}D.sort(function(F,E){return F.snapDist()-E.snapDist()});var C=[];C.push(D[0]);for(var B=1;B<D.length;B++){if(D[B].result_.title!=D[B-1].result_.title&&D[B].result_.streetAddress!=D[B-1].result_.streetAddress){C.push(D[B])}}if(!A||A>=C.length){return C}return C.slice(0,A)}function labelResults(C,B){for(var A=0;A<C.length;A++){C[A].resultSetIndex=B;C[A].resultIndex=A}}function convertMeters(B,A,C,F){if(A==UNITS_MI){var D=B/1609.34;if(F){D=Math.round(100*D)/100}if(D<=0){D=0.01}if(C){D=D+" Mi"}return D}else{var E=B/1000;if(F){E=Math.round(100*E)/100}if(E<=0){E=0.01}if(C){E=E+" km"}return E}}function snapToGrid(A){A=1*A;gs=0.0015;diff=Math.round(((A+1500)%gs)*100000)/100000;if(diff!=0){if(Math.abs(diff)<(gs/2)){A=A-diff}else{A=A+gs-diff}}return(Math.round(A*10000))/10000}function getValue(A){if(A&&A.value){return A.value}return null}function setValue(B,A){if(B){B.value=A}}function getElemInternal(A){if(typeof (A)=="string"){return document.getElementById(A)}return A}function getElem(A){if(typeof (A)=="string"){return document.getElementById(A)}return null}function getHTML(B){var A=getElemInternal(B);if(A){return A.innerHTML}return null}function setHTML(C,A){var B=getElemInternal(C);if(B){B.innerHTML=A;return true}return false}function appendHTML(C,A){var B=getElemInternal(C);if(B){B.innerHTML+=A;return true}return false}function setStyle(C,A){var B=getElemInternal(C);if(B&&typeof (A)=="string"){B.style.cssText+=";"+A}}function getDocBody(){return document.getElementsByTagName("BODY")[0]}function addElemToDom(A){getDocBody().appendChild(A)}function startProgressIndicator(){setHTML("progress","<img src='http://www2.walkscore.com/images/progress.gif' alt='' />")}function stopProgressIndicator(){setHTML("progress","<img src='http://www2.walkscore.com/images/progress-spacer.gif' alt='' />")}function showDialog(D,C,B){initDialog();startModal();var A=(B)?'<img class="close-box" onclick="hideDialog()" src="http://www2.walkscore.com/images/closeBox.gif" />':"";A+=D;getElem("ws-dialog").className=C;setHTML("ws-dialog",A);setStyle("ws-dialog","display:block;")}function hideDialog(){setStyle("ws-dialog","display:none;");endModal()}function initDialog(){if(getElem("ws-dialog")!=null){return }var A=document.createElement("div");A.id="ws-dialog";addElemToDom(A)}function startModal(){initModal();var A=getElem("popupMask");if(A&&A.style.display=="none"){setStyle(A,"display:block;");setMaskSize();hideSelectBoxes()}}function endModal(){setStyle("popupMask","display:none;");displaySelectBoxes()}function initModal(){if(getElem("popupMask")!=null){return }var A=document.createElement("div");A.id="popupMask";addElemToDom(A);setStyle(A,"display:none;");window.onresize=setMaskSize;window.onscroll=setMaskSize}function setMaskSize(){var B=getDocBody();var A=getElem("popupMask");A.style.top=Math.max(document.body.scrollTop,document.documentElement.scrollTop)+"px";A.style.left=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft)+"px";A.style.height=Math.max(getViewportHeight(),B.scrollHeight)+"px";A.style.width=Math.max(getViewportWidth(),B.scrollWidth)+"px"}function getViewportHeight(){if(window.innerHeight!=window.undefined){return window.innerHeight}if(document.compatMode=="CSS1Compat"){return document.documentElement.clientHeight}if(document.body){return document.body.clientHeight}return window.undefined}function getViewportWidth(){if(window.innerWidth!=window.undefined){return window.innerWidth}if(document.compatMode=="CSS1Compat"){return document.documentElement.clientWidth}if(document.body){return document.body.clientWidth}}function hideSelectBoxes(){if(navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.appVersion.split("MSIE")[1])<7){var B=document.getElementsByTagName("SELECT");for(var A=0;A<B.length;A++){B[A].style.visibility="hidden"}}}function displaySelectBoxes(){if(navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.appVersion.split("MSIE")[1])<7){var B=document.getElementsByTagName("SELECT");for(var A=0;A<B.length;A++){B[A].style.visibility="visible"}}}function reportError(A){showMessage(A)}var reportStatus=new Array();function report(A){reportStatus.push(A)}function showReport(){if(reportStatus[0].indexOf("Error loading script")!=-1){return }alert("javascript reporting an error: "+reportStatus.join("\n"))}window.onerror=function(C,B,A){report(C+" ["+B+" - line "+A+"]");showReport()};function rand(A){return(Math.floor(Math.random()*A+1))}function byte2Hex(B){var A="0123456789ABCDEF";return String(A.substr((B>>4)&15,1))+A.substr(B&15,1)}function RGB2Color(C,B,A){return"#"+byte2Hex(C)+byte2Hex(B)+byte2Hex(A)}function convertToTime(C){var A=Math.floor(C);var D=String(extractMinutes(C));if(D.length==1){D="0"+D}var B=(A>=12)?"pm":"am";if(A==24){A=12;B="am"}else{if(A==0){A=12}else{if(A>12){A-=12}}}return A+":"+D+B}function extractMinutes(B){var A=Math.floor(B);var C=Math.round((B-A)*60);return C}function extractHours(A){return Math.floor(A)%24}
function roundNumber(B,C){var A=Math.round(B*Math.pow(10,C-1))/Math.pow(10,C-1);return A};